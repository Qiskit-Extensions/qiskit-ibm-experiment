<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.08.19 -->
        <title>qiskit_ibm_experiment.service.ibm_experiment_service - Qiskit IBM Experiment 0.2.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=82a976d7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/qiskit-sphinx-theme.css?v=fe84956c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/qiskit-ecosystem.css?v=745c5aa7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
<script src="../../../_static/js/web-components/top-nav-bar.js"></script></head>
  <body>
    
    <script>document.body.dataset.theme = "light";</script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <path d="M28,4H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V6A2,2,0,0,0,28,4ZM4,6H20V26H4ZM28,26H22V6h6Z"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <rect x="4" y="6" width="24" height="2"/>
      <rect x="4" y="24" width="24" height="2"/>
      <rect x="4" y="12" width="24" height="2"/>
      <rect x="4" y="18" width="24" height="2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
         viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><polygon points="22,16 12,26 10.6,24.6 19.2,16 10.6,7.4 12,6 " stroke="currentColor"/>
      <rect id="_x3C_Transparent_Rectangle_x3E_" fill="none" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-new-tab" viewBox="0 0 32 32">
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
      <defs>
        <style>
          .cls-1 {
            fill: none;
          }
        </style>
      </defs>
      <path fill="#6929C4" d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"/>
      <polygon fill="#6929C4" points="20 2 20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Qiskit IBM Experiment 0.2.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-brand">
  <a href="https://www.qiskit.org/ecosystem">
    <div class="sidebar-logo-container">
      <img class="sidebar-logo" src="../../../_static/images/ecosystem-logo.svg" alt="Qiskit Ecosystem logo"/>
    </div>
  </a>
  
  <span class="sidebar-brand-text">Qiskit IBM Experiment 0.2.0</span>
</div><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/index.html">API References</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API References</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/main.html">Qiskit Experiment Service (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_ibm_experiment</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Qiskit Experiment Service (qiskit_ibm_experiment)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.IBMExperimentError.html">IBMExperimentError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.IBMExperimentEntryExists.html">IBMExperimentEntryExists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.IBMExperimentEntryNotFound.html">IBMExperimentEntryNotFound</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/accounts.html">Accounts (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_ibm_experiment.accounts</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Accounts (qiskit_ibm_experiment.accounts)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.Account.html">Account</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Account</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.Account.from_saved_format.html">Account.from_saved_format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.Account.to_saved_format.html">Account.to_saved_format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.Account.validate.html">Account.validate</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountManager.html">AccountManager</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of AccountManager</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountManager.delete.html">AccountManager.delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountManager.get.html">AccountManager.get</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountManager.list.html">AccountManager.list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountManager.save.html">AccountManager.save</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.html">ProxyConfiguration</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of ProxyConfiguration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.password_ntlm.html">ProxyConfiguration.password_ntlm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.urls.html">ProxyConfiguration.urls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.username_ntlm.html">ProxyConfiguration.username_ntlm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.to_dict.html">ProxyConfiguration.to_dict</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.to_request_params.html">ProxyConfiguration.to_request_params</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.to_ws_params.html">ProxyConfiguration.to_ws_params</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.ProxyConfiguration.validate.html">ProxyConfiguration.validate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountNotFoundError.html">AccountNotFoundError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.AccountAlreadyExistsError.html">AccountAlreadyExistsError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.accounts.InvalidAccountError.html">InvalidAccountError</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/client.html">Client (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_ibm_experiment.client</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Client (qiskit_ibm_experiment.client)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.html">ExperimentClient</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ExperimentClient</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.analysis_result_create.html">ExperimentClient.analysis_result_create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.analysis_result_delete.html">ExperimentClient.analysis_result_delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.analysis_result_get.html">ExperimentClient.analysis_result_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.analysis_result_update.html">ExperimentClient.analysis_result_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.analysis_results.html">ExperimentClient.analysis_results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.bulk_analysis_result_update.html">ExperimentClient.bulk_analysis_result_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.device_components.html">ExperimentClient.device_components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.devices.html">ExperimentClient.devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_delete.html">ExperimentClient.experiment_delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_file_download.html">ExperimentClient.experiment_file_download</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_file_upload.html">ExperimentClient.experiment_file_upload</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_files_get.html">ExperimentClient.experiment_files_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_get.html">ExperimentClient.experiment_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_plot_delete.html">ExperimentClient.experiment_plot_delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_plot_get.html">ExperimentClient.experiment_plot_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_plot_update.html">ExperimentClient.experiment_plot_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_plot_upload.html">ExperimentClient.experiment_plot_upload</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_update.html">ExperimentClient.experiment_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiment_upload.html">ExperimentClient.experiment_upload</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.client.ExperimentClient.experiments.html">ExperimentClient.experiments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/service.html">Service (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_ibm_experiment.service</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Service (qiskit_ibm_experiment.service)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.html">IBMExperimentService</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of IBMExperimentService</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.local.html">IBMExperimentService.local</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.preferences.html">IBMExperimentService.preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_result.html">IBMExperimentService.analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_result_list_to_dataframe.html">IBMExperimentService.analysis_result_list_to_dataframe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_results.html">IBMExperimentService.analysis_results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.backends.html">IBMExperimentService.backends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.bulk_update_analysis_result.html">IBMExperimentService.bulk_update_analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_result.html">IBMExperimentService.create_analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_results.html">IBMExperimentService.create_analysis_results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_experiment.html">IBMExperimentService.create_experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_figure.html">IBMExperimentService.create_figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_figures.html">IBMExperimentService.create_figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update.html">IBMExperimentService.create_or_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_analysis_result.html">IBMExperimentService.create_or_update_analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_experiment.html">IBMExperimentService.create_or_update_experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_figure.html">IBMExperimentService.create_or_update_figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.dataframe_to_analysis_result_list.html">IBMExperimentService.dataframe_to_analysis_result_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_account.html">IBMExperimentService.delete_account</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_analysis_result.html">IBMExperimentService.delete_analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_experiment.html">IBMExperimentService.delete_experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_figure.html">IBMExperimentService.delete_figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.device_components.html">IBMExperimentService.device_components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiment.html">IBMExperimentService.experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiment_has_file.html">IBMExperimentService.experiment_has_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiments.html">IBMExperimentService.experiments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.figure.html">IBMExperimentService.figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.file_download.html">IBMExperimentService.file_download</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.file_upload.html">IBMExperimentService.file_upload</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.files.html">IBMExperimentService.files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.get_access_token.html">IBMExperimentService.get_access_token</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.get_db_url.html">IBMExperimentService.get_db_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.save_account.html">IBMExperimentService.save_account</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.set_option.html">IBMExperimentService.set_option</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_analysis_result.html">IBMExperimentService.update_analysis_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_experiment.html">IBMExperimentService.update_experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_figure.html">IBMExperimentService.update_figure</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.ResultQuality.html">ResultQuality</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ResultQuality</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.ResultQuality.BAD.html">ResultQuality.BAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.ResultQuality.GOOD.html">ResultQuality.GOOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.ResultQuality.UNKNOWN.html">ResultQuality.UNKNOWN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_ibm_experiment.service.DeviceComponent.html">DeviceComponent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/Migration%20Guide.html">Experiment service migration guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/Migration%20Guide.html#Service-creation">Service creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/Migration%20Guide.html#Method-usage">Method usage</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for qiskit_ibm_experiment.service.ibm_experiment_service</h1><div class="highlight"><pre>
<span></span><span class="c1"># This code is part of Qiskit.</span>
<span class="c1">#</span>
<span class="c1"># (C) Copyright IBM 2021.</span>
<span class="c1">#</span>
<span class="c1"># This code is licensed under the Apache License, Version 2.0. You may</span>
<span class="c1"># obtain a copy of this license in the LICENSE.txt file in the root directory</span>
<span class="c1"># of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.</span>
<span class="c1">#</span>
<span class="c1"># Any modifications or derivative works of this code must retain this</span>
<span class="c1"># copyright notice, and modified files need to carry a notice indicating</span>
<span class="c1"># that they have been altered from the originals.</span>

<span class="sd">&quot;&quot;&quot;IBM Quantum experiment service.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">.constants</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ExperimentShareLevel</span><span class="p">,</span>
    <span class="n">ResultQuality</span><span class="p">,</span>
    <span class="n">RESULT_QUALITY_FROM_API</span><span class="p">,</span>
    <span class="n">RESULT_QUALITY_TO_API</span><span class="p">,</span>
    <span class="n">RESULT_QUALITY_FROM_DATAFRAME</span><span class="p">,</span>
    <span class="n">RESULT_QUALITY_TO_DATAFRAME</span><span class="p">,</span>
    <span class="n">DEFAULT_BASE_URL</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">map_api_error</span><span class="p">,</span> <span class="n">local_to_utc_str</span><span class="p">,</span> <span class="n">utc_to_local</span><span class="p">,</span> <span class="n">ThreadSaveHandler</span>
<span class="kn">from</span> <span class="nn">.device_component</span> <span class="kn">import</span> <span class="n">DeviceComponent</span>
<span class="kn">from</span> <span class="nn">.experiment_dataclasses</span> <span class="kn">import</span> <span class="n">ExperimentData</span><span class="p">,</span> <span class="n">AnalysisResultData</span>
<span class="kn">from</span> <span class="nn">..client.experiment</span> <span class="kn">import</span> <span class="n">ExperimentClient</span>
<span class="kn">from</span> <span class="nn">..exceptions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">IBMExperimentEntryExists</span><span class="p">,</span>
    <span class="n">IBMExperimentEntryNotFound</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..client.local_client</span> <span class="kn">import</span> <span class="n">LocalExperimentClient</span>
<span class="kn">from</span> <span class="nn">..exceptions</span> <span class="kn">import</span> <span class="n">RequestsApiError</span><span class="p">,</span> <span class="n">IBMApiError</span>
<span class="kn">from</span> <span class="nn">..accounts</span> <span class="kn">import</span> <span class="n">AccountManager</span><span class="p">,</span> <span class="n">Account</span><span class="p">,</span> <span class="n">ProxyConfiguration</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="IBMExperimentService">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.html#qiskit_ibm_experiment.service.IBMExperimentService">[docs]</a>
<span class="k">class</span> <span class="nc">IBMExperimentService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides experiment related services.</span>

<span class="sd">    This class is the main interface to invoke IBM Quantum</span>
<span class="sd">    experiment service, which allows you to create, delete, update, query, and</span>
<span class="sd">    retrieve experiments, experiment figures, and analysis results.</span>

<span class="sd">    .. parsed-literal::</span>
<span class="sd">        # Retrieve all experiments.</span>
<span class="sd">        experiments = experiment_provider.experiments()</span>

<span class="sd">        # Retrieve experiments with filtering.</span>
<span class="sd">        experiment_filtered = experiment_provider.experiments(backend_name=&#39;ibmq_athens&#39;)</span>

<span class="sd">        # Retrieve a specific experiment using its ID.</span>
<span class="sd">        experiment = experiment_provider.experiment(EXPERIMENT_ID)</span>

<span class="sd">        # Upload a new experiment.</span>
<span class="sd">        new_experiment_id = .experiment_provider.create_experiment(</span>
<span class="sd">            experiment_type=&quot;T1&quot;,</span>
<span class="sd">            backend_name=&quot;ibmq_athens&quot;,</span>
<span class="sd">            metadata={&quot;qubits&quot;: 5}</span>
<span class="sd">        )</span>

<span class="sd">        # Update an experiment.</span>
<span class="sd">        experiment_provider.update_experiment(</span>
<span class="sd">            experiment_id=EXPERIMENT_ID,</span>
<span class="sd">            share_level=&quot;Group&quot;</span>
<span class="sd">        )</span>

<span class="sd">        # Delete an experiment.</span>
<span class="sd">        experiment_provider.delete_experiment(EXPERIMENT_ID)</span>

<span class="sd">    Similar syntax applies to analysis results and experiment figures.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_default_preferences</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;auto_save&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
    <span class="n">_default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt_for_delete&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;requests_timeout&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
    <span class="n">_DEFAULT_LOCAL_DB_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.qiskit&quot;</span><span class="p">,</span> <span class="s2">&quot;resultdb&quot;</span><span class="p">)</span>
    <span class="n">_AUTHENTICATION_CMD</span> <span class="o">=</span> <span class="s2">&quot;/users/loginWithToken&quot;</span>
    <span class="n">_USER_DATA_CMD</span> <span class="o">=</span> <span class="s2">&quot;/users/me&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hgp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">proxies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">local</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">local_save</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;IBMExperimentService constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            token: the API token to use when establishing connection with the result DB</span>
<span class="sd">            url: the url for the result DB API</span>
<span class="sd">            local: Whether to use a local DB client which does not connect to the result DB</span>
<span class="sd">            local_save: If using a local client, whether to enable save to disk or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hgp</span> <span class="o">=</span> <span class="n">hgp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">DEFAULT_BASE_URL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_account</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_discover_account</span><span class="p">(</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">proxies</span><span class="o">=</span><span class="n">ProxyConfiguration</span><span class="p">(</span><span class="o">**</span><span class="n">proxies</span><span class="p">)</span> <span class="k">if</span> <span class="n">proxies</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
            <span class="n">local</span><span class="o">=</span><span class="n">local</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">preferences</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_preferences</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_access_token</span><span class="p">()</span>
            <span class="n">db_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_db_url</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;proxies&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">proxies</span><span class="o">.</span><span class="n">to_request_params</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">proxies</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;verify&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">verify</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span> <span class="o">=</span> <span class="n">ExperimentClient</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_access_token</span><span class="p">,</span> <span class="n">db_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_params</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span> <span class="o">=</span> <span class="n">LocalExperimentClient</span><span class="p">(</span>
                <span class="n">main_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_LOCAL_DB_DIR</span><span class="p">,</span> <span class="n">local_save</span><span class="o">=</span><span class="n">local_save</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">local</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The local property determines whether data is stored locally and not on the remote server&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">local</span>

<div class="viewcode-block" id="IBMExperimentService.set_option">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.set_option.html#qiskit_ibm_experiment.service.IBMExperimentService.set_option">[docs]</a>
    <span class="k">def</span> <span class="nf">set_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the options given as keywords&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="IBMExperimentService.get_access_token">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.get_access_token.html#qiskit_ibm_experiment.service.IBMExperimentService.get_access_token">[docs]</a>
    <span class="k">def</span> <span class="nf">get_access_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_token</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticates to the server with the API token, receiving access token</span>
<span class="sd">        for the current session&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">api_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">api_token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">token</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span><span class="s2">&quot;No API token; cannot connect to service&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiToken&quot;</span><span class="p">:</span> <span class="n">api_token</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_AUTHENTICATION_CMD</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;requests_timeout&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Did not receive access token (request returned </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_access_token</span> <span class="o">=</span> <span class="n">access_token</span>
        <span class="k">return</span> <span class="n">access_token</span></div>


<div class="viewcode-block" id="IBMExperimentService.get_db_url">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.get_db_url.html#qiskit_ibm_experiment.service.IBMExperimentService.get_db_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_db_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive the url for the database API from the server&quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;X-Access-Token&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_access_token</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_USER_DATA_CMD</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;requests_timeout&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">db_url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;urls&quot;</span><span class="p">][</span><span class="s2">&quot;services&quot;</span><span class="p">][</span><span class="s2">&quot;resultsDB&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">db_url</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to retrieve the API url for the database (request returned </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span></div>


<div class="viewcode-block" id="IBMExperimentService.save_account">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.save_account.html#qiskit_ibm_experiment.service.IBMExperimentService.save_account">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">save_account</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">proxies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the account to disk for future use.</span>

<span class="sd">        Args:</span>
<span class="sd">            token: IBM Cloud API key or IBM Quantum API token.</span>
<span class="sd">            url: The API URL.</span>
<span class="sd">                Defaults to https://api.quantum-computing.ibm.com</span>
<span class="sd">            name: Name of the account to save.</span>
<span class="sd">            proxies: Proxy configuration. Supported optional keys are</span>
<span class="sd">                ``urls`` (a dictionary mapping protocol or protocol and host to the URL of the proxy,</span>
<span class="sd">                documented at https://docs.python-requests.org/en/latest/api/#requests.Session.proxies),</span>
<span class="sd">                ``username_ntlm``, ``password_ntlm`` (username and password to enable NTLM user</span>
<span class="sd">                authentication)</span>
<span class="sd">            verify: Verify the server&#39;s TLS certificate.</span>
<span class="sd">            overwrite: ``True`` if the existing account is to be overwritten.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">DEFAULT_BASE_URL</span>
        <span class="n">AccountManager</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">proxies</span><span class="o">=</span><span class="n">ProxyConfiguration</span><span class="p">(</span><span class="o">**</span><span class="n">proxies</span><span class="p">)</span> <span class="k">if</span> <span class="n">proxies</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_discover_account</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">proxies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ProxyConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">local</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Account</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Discover account.&quot;&quot;&quot;</span>
        <span class="n">account</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">verify_</span> <span class="o">=</span> <span class="n">verify</span> <span class="ow">or</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">token</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">local</span><span class="p">]):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Loading account with name </span><span class="si">%s</span><span class="s2">. Any input &#39;token&#39;, &#39;url&#39;, &#39;local&#39; are ignored.&quot;</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">account</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">local</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Account</span><span class="p">(</span><span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Account</span><span class="p">(</span>
                <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
                <span class="n">verify</span><span class="o">=</span><span class="n">verify_</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">account</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">account</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">proxies</span><span class="p">:</span>
            <span class="n">account</span><span class="o">.</span><span class="n">proxies</span> <span class="o">=</span> <span class="n">proxies</span>
        <span class="k">if</span> <span class="n">verify</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">account</span><span class="o">.</span><span class="n">verify</span> <span class="o">=</span> <span class="n">verify</span>

        <span class="c1"># ensure account is valid, fail early if not</span>
        <span class="n">account</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">account</span>

<div class="viewcode-block" id="IBMExperimentService.backends">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.backends.html#qiskit_ibm_experiment.service.IBMExperimentService.backends">[docs]</a>
    <span class="k">def</span> <span class="nf">backends</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of backends that can be used for experiments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of backends.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">devices</span><span class="p">()</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_experiment">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_experiment.html#qiskit_ibm_experiment.service.IBMExperimentService.create_experiment">[docs]</a>
    <span class="k">def</span> <span class="nf">create_experiment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">ExperimentData</span><span class="p">,</span>
        <span class="n">provider</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new experiment in the database.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The dataclass containing the experiment&#39;s data</span>
<span class="sd">            provider: The provider used when running the experiment</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Experiment ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryExists: If the experiment already exits.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The upload response data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hgp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">hub</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hgp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="n">provider</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">provider</span><span class="p">,</span> <span class="s2">&quot;_hgps&quot;</span><span class="p">):</span>
                <span class="n">data</span><span class="o">.</span><span class="n">hub</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">provider</span><span class="o">.</span><span class="n">_hgps</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

        <span class="n">api_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_data_to_api</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="s2">&quot;hub_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api_data</span>
            <span class="ow">or</span> <span class="s2">&quot;group_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api_data</span>
            <span class="ow">or</span> <span class="s2">&quot;project_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api_data</span>
        <span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;create_experiment() called without hub/group/project data &quot;</span>
                <span class="s2">&quot;(passing a provider parameter enables inference of these values)&quot;</span>
            <span class="p">)</span>

        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Experiment </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span><span class="si">}</span><span class="s2"> creation failed.&quot;</span><span class="p">):</span>
            <span class="n">response_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_upload</span><span class="p">(</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">api_data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">response_data</span></div>


<div class="viewcode-block" id="IBMExperimentService.update_experiment">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_experiment.html#qiskit_ibm_experiment.service.IBMExperimentService.update_experiment">[docs]</a>
    <span class="k">def</span> <span class="nf">update_experiment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">ExperimentData</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update an existing experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The dataclass containing the experiment&#39;s data</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the experiment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the experiment does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        Returns:</span>
<span class="sd">            The update response data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">api_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_data_to_api</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">unused_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
            <span class="s2">&quot;device_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;group_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hub_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;project_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">,</span>
            <span class="s2">&quot;start_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;parent_experiment_uuid&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">unused_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">api_data</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">api_data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;update_experiment() called with nothing to update.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Experiment </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span><span class="si">}</span><span class="s2"> update failed.&quot;</span><span class="p">):</span>
            <span class="n">response_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_update</span><span class="p">(</span>
                <span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">api_data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">response_data</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_or_update_experiment">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_experiment.html#qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_experiment">[docs]</a>
    <span class="k">def</span> <span class="nf">create_or_update_experiment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">ExperimentData</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
        <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new experiment, or updates an existing one&quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;json_encoder&quot;</span><span class="p">:</span> <span class="n">json_encoder</span><span class="p">})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_or_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_experiment</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">create</span><span class="p">,</span> <span class="n">max_attempts</span>
        <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_experiment_data_to_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">ExperimentData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert experiment data to API request data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The dataclass containing the experiment&#39;s data</span>

<span class="sd">        Returns:</span>
<span class="sd">            API request data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># type: Dict[str, Any]</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_type</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_type</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">backend</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;device_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">backend</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;extra&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">metadata</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">parent_id</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;parent_experiment_uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">parent_id</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">hub</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;hub_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">hub</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;group_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">group</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;project_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">project</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">share_level</span><span class="p">:</span>
            <span class="n">share_level</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">share_level</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">share_level</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">share_level</span> <span class="o">=</span> <span class="n">ExperimentShareLevel</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">share_level</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;visibility&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">share_level</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">tags</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">tags</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">tags</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">job_ids</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;jobs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">job_ids</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">notes</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">start_datetime</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">start_datetime</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">end_datetime</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;end_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">end_datetime</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

<div class="viewcode-block" id="IBMExperimentService.experiment">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiment.html#qiskit_ibm_experiment.service.IBMExperimentService.experiment">[docs]</a>
    <span class="k">def</span> <span class="nf">experiment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">json_decoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a previously stored experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>
<span class="sd">            json_decoder: Custom JSON decoder to use to decode the retrieved experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Retrieved experiment data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the experiment does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Experiment </span><span class="si">{</span><span class="n">experiment_id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">):</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_get</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)</span>
        <span class="n">experiment_data_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_to_experiment_data</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_decoder</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">ExperimentData</span><span class="p">(</span><span class="o">**</span><span class="n">experiment_data_dict</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.experiments">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiments.html#qiskit_ibm_experiment.service.IBMExperimentService.experiments">[docs]</a>
    <span class="k">def</span> <span class="nf">experiments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">json_decoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">,</span>
        <span class="n">device_components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DeviceComponent</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">device_components_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_type_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">backend_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;OR&quot;</span><span class="p">,</span>
        <span class="n">start_datetime_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_datetime_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">group</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">project</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude_public</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">public_only</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">exclude_mine</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mine_only</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ExperimentData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all experiments, with optional filtering.</span>

<span class="sd">        By default, results returned are as inclusive as possible. For example,</span>
<span class="sd">        if you don&#39;t specify any filters, all experiments visible to you</span>
<span class="sd">        are returned. This includes your own experiments as well as</span>
<span class="sd">        those shared with you, from all providers you have access to</span>
<span class="sd">        (not just from the provider you used to invoke this experiment service).</span>

<span class="sd">        Args:</span>
<span class="sd">            limit: Number of experiments to retrieve. ``None`` indicates no limit.</span>
<span class="sd">            json_decoder: Custom JSON decoder to use to decode the retrieved experiments.</span>
<span class="sd">            device_components: Filter by device components.</span>
<span class="sd">            device_components_operator: Operator used when filtering by device components.</span>
<span class="sd">                Valid values are ``None`` and &quot;contains&quot;:</span>

<span class="sd">                    * If ``None``, an analysis result&#39;s device components must match</span>
<span class="sd">                      exactly for it to be included.</span>
<span class="sd">                    * If &quot;contains&quot; is specified, an analysis result&#39;s device components</span>
<span class="sd">                      must contain at least the values specified by the `device_components`</span>
<span class="sd">                      filter.</span>

<span class="sd">            experiment_type: Experiment type used for filtering.</span>
<span class="sd">            experiment_type_operator: Operator used when filtering by experiment type.</span>
<span class="sd">                Valid values are ``None`` and &quot;like&quot;:</span>

<span class="sd">                * If ``None`` is specified, an experiment&#39;s type value must</span>
<span class="sd">                  match exactly for it to be included.</span>
<span class="sd">                * If &quot;like&quot; is specified, an experiment&#39;s type value must</span>
<span class="sd">                  contain the value specified by `experiment_type`. For example,</span>
<span class="sd">                  ``experiment_type=&quot;foo&quot;, experiment_type_operator=&quot;like&quot;`` will match</span>
<span class="sd">                  both ``foo1`` and ``1foo``.</span>
<span class="sd">            backend_name: Backend name used for filtering.</span>
<span class="sd">            tags: Filter by tags assigned to experiments.</span>
<span class="sd">            tags_operator: Logical operator to use when filtering by job tags. Valid</span>
<span class="sd">                values are &quot;AND&quot; and &quot;OR&quot;:</span>

<span class="sd">                    * If &quot;AND&quot; is specified, then an experiment must have all of the tags</span>
<span class="sd">                      specified in `tags` to be included.</span>
<span class="sd">                    * If &quot;OR&quot; is specified, then an experiment only needs to have any</span>
<span class="sd">                      of the tags specified in `tags` to be included.</span>

<span class="sd">            start_datetime_after: Filter by the given start timestamp, in local time.</span>
<span class="sd">                This is used to find experiments whose start date/time is after</span>
<span class="sd">                (greater than or equal to) this local timestamp.</span>
<span class="sd">            start_datetime_before: Filter by the given start timestamp, in local time.</span>
<span class="sd">                This is used to find experiments whose start date/time is before</span>
<span class="sd">                (less than or equal to) this local timestamp.</span>
<span class="sd">            hub: Filter by hub.</span>
<span class="sd">            group: Filter by hub and group. `hub` must also be specified if `group` is.</span>
<span class="sd">            project: Filter by hub, group, and project. `hub` and `group` must also be</span>
<span class="sd">                specified if `project` is.</span>
<span class="sd">            exclude_public: If ``True``, experiments with ``share_level=public``</span>
<span class="sd">                (that is, experiments visible to all users) will not be returned.</span>
<span class="sd">                Cannot be ``True`` if `public_only` is ``True``.</span>
<span class="sd">            public_only: If ``True``, only experiments with ``share_level=public``</span>
<span class="sd">                (that is, experiments visible to all users) will be returned.</span>
<span class="sd">                Cannot be ``True`` if `exclude_public` is ``True``.</span>
<span class="sd">            exclude_mine: If ``True``, experiments where I am the owner will not be returned.</span>
<span class="sd">                Cannot be ``True`` if `mine_only` is ``True``.</span>
<span class="sd">            mine_only: If ``True``, only experiments where I am the owner will be returned.</span>
<span class="sd">                Cannot be ``True`` if `exclude_mine` is ``True``.</span>
<span class="sd">            parent_id: Filter experiments by this parent experiment ID.</span>
<span class="sd">            sort_by: Specifies how the output should be sorted. This can be a single sorting</span>
<span class="sd">                option or a list of options. Each option should contain a sort key</span>
<span class="sd">                and a direction, separated by a colon. Valid sort keys are</span>
<span class="sd">                &quot;start_time&quot; and &quot;experiment_type&quot;.</span>
<span class="sd">                Valid directions are &quot;asc&quot; for ascending or &quot;desc&quot; for descending.</span>
<span class="sd">                For example, ``sort_by=[&quot;experiment_type:asc&quot;, &quot;start_time:desc&quot;]`` will</span>
<span class="sd">                return an output list that is first sorted by experiment type in</span>
<span class="sd">                ascending order, then by start datetime by descending order.</span>
<span class="sd">                By default, experiments are sorted by ``start_time``</span>
<span class="sd">                descending and ``experiment_id`` ascending.</span>
<span class="sd">            **filters: Additional filtering keywords that are not supported and will be ignored.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of experiments. Each experiment is a dictionary containing the</span>
<span class="sd">            retrieved experiment data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an invalid parameter value is specified.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=arguments-differ</span>
        <span class="c1"># pylint: disable=missing-param-doc</span>
        <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Keywords </span><span class="si">%s</span><span class="s2"> are not supported by IBM Quantum experiment service &quot;</span>
                <span class="s2">&quot;and will be ignored.&quot;</span><span class="p">,</span>
                <span class="n">filters</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">limit</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> is not a valid `limit`, which has to be a positive integer.&quot;</span>
            <span class="p">)</span>

        <span class="n">pgh_text</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="s2">&quot;hub&quot;</span><span class="p">]</span>
        <span class="n">pgh_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">project</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">hub</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pgh_val</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">pgh_val</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;If </span><span class="si">{</span><span class="n">pgh_text</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="si">}</span><span class="s2"> is specified, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; and &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pgh_text</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span><span class="si">}</span><span class="s2"> must also be specified.&quot;</span>
                <span class="p">)</span>

        <span class="n">start_time_filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">start_datetime_after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">st_filter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ge:</span><span class="si">{</span><span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">start_datetime_after</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">start_time_filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st_filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_datetime_before</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">st_filter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;le:</span><span class="si">{</span><span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">start_datetime_before</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">start_time_filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st_filter</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">exclude_public</span> <span class="ow">and</span> <span class="n">public_only</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;exclude_public and public_only cannot both be True&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">exclude_mine</span> <span class="ow">and</span> <span class="n">mine_only</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;exclude_mine and mine_only cannot both be True&quot;</span><span class="p">)</span>

        <span class="n">converted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filtering_to_api</span><span class="p">(</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
            <span class="n">tags_operator</span><span class="o">=</span><span class="n">tags_operator</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
            <span class="n">sort_map</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;start_datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;start_time&quot;</span><span class="p">,</span>
                <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="s2">&quot;start_time&quot;</span><span class="p">,</span>
                <span class="s2">&quot;experiment_type&quot;</span><span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">device_components</span><span class="o">=</span><span class="n">device_components</span><span class="p">,</span>
            <span class="n">device_components_operator</span><span class="o">=</span><span class="n">device_components_operator</span><span class="p">,</span>
            <span class="n">item_type</span><span class="o">=</span><span class="n">experiment_type</span><span class="p">,</span>
            <span class="n">item_type_operator</span><span class="o">=</span><span class="n">experiment_type_operator</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">experiments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">limit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="s2">&quot;Request failed.&quot;</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiments</span><span class="p">(</span>
                    <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
                    <span class="n">backend_name</span><span class="o">=</span><span class="n">backend_name</span><span class="p">,</span>
                    <span class="n">experiment_type</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                    <span class="n">start_time</span><span class="o">=</span><span class="n">start_time_filters</span><span class="p">,</span>
                    <span class="n">device_components</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;device_components&quot;</span><span class="p">],</span>
                    <span class="n">tags</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="n">hub</span><span class="o">=</span><span class="n">hub</span><span class="p">,</span>
                    <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
                    <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span>
                    <span class="n">exclude_public</span><span class="o">=</span><span class="n">exclude_public</span><span class="p">,</span>
                    <span class="n">public_only</span><span class="o">=</span><span class="n">public_only</span><span class="p">,</span>
                    <span class="n">exclude_mine</span><span class="o">=</span><span class="n">exclude_mine</span><span class="p">,</span>
                    <span class="n">mine_only</span><span class="o">=</span><span class="n">mine_only</span><span class="p">,</span>
                    <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
                    <span class="n">sort_by</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;sort_by&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_decoder</span><span class="p">)</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;marker&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">exp</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;experiments&quot;</span><span class="p">]:</span>
                <span class="n">experiment_data_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_to_experiment_data</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
                <span class="n">experiments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ExperimentData</span><span class="p">(</span><span class="o">**</span><span class="n">experiment_data_dict</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;experiments&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">marker</span><span class="p">:</span>  <span class="c1"># No more experiments to return.</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">experiments</span></div>


    <span class="k">def</span> <span class="nf">_api_to_experiment_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">raw_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert API response to experiment data.</span>

<span class="sd">        Args:</span>
<span class="sd">            raw_data: API response</span>

<span class="sd">        Returns:</span>
<span class="sd">            Converted experiment data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">backend_name</span> <span class="o">=</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;device_name&quot;</span><span class="p">]</span>
        <span class="c1"># should decide whether the wanted functionality is returning</span>
        <span class="c1"># an actual backend (requires a given provider) or simply the name</span>
        <span class="c1"># backend = self._provider.get_backend(backend_name)</span>
        <span class="n">backend</span> <span class="o">=</span> <span class="n">backend_name</span>

        <span class="n">extra_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span>
            <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;creation_datetime&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_time&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;start_datetime&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_time&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;end_datetime&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span>
            <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;updated_at&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;updated_datetime&quot;</span>
        <span class="p">)</span>

        <span class="n">out_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;experiment_type&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
            <span class="s2">&quot;backend&quot;</span><span class="p">:</span> <span class="n">backend</span><span class="p">,</span>
            <span class="s2">&quot;experiment_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">],</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parent_experiment_uuid&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[],</span>
            <span class="s2">&quot;job_ids&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;jobs&quot;</span><span class="p">],</span>
            <span class="s2">&quot;share_level&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{},</span>
            <span class="s2">&quot;figure_names&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plot_names&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;hub&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hub_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;group_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;project_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="o">**</span><span class="n">extra_data</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">out_dict</span>

    <span class="k">def</span> <span class="nf">_convert_dt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert input timestamp.</span>

<span class="sd">        Args:</span>
<span class="sd">            timestamp: Timestamp to be converted.</span>
<span class="sd">            data: Data used to stored the converted timestamp.</span>
<span class="sd">            field_name: Name used to store the converted timestamp.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">timestamp</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">utc_to_local</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>

<div class="viewcode-block" id="IBMExperimentService.delete_experiment">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_experiment.html#qiskit_ibm_experiment.service.IBMExperimentService.delete_experiment">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete an experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method prompts for confirmation and requires a response before proceeding.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_delete</span><span class="p">(</span>
            <span class="s2">&quot;Are you sure you want to delete the experiment? &quot;</span>
            <span class="s2">&quot;Results and plots for the experiment will also be deleted. [y/N]: &quot;</span>
        <span class="p">):</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_delete</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">RequestsApiError</span> <span class="k">as</span> <span class="n">api_err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">api_err</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Experiment </span><span class="si">%s</span><span class="s2"> not found.&quot;</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to process the request: </span><span class="si">{</span><span class="n">api_err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">create_analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">AnalysisResultData</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new analysis result in the database.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The data to save.</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the analysis result.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Analysis result ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryExists: If the analysis result already exits.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_result_to_api</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analysis result </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">result_id</span><span class="si">}</span><span class="s2"> creation failed.&quot;</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">analysis_result_create</span><span class="p">(</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span></div>


<div class="viewcode-block" id="IBMExperimentService.update_analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.update_analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">update_analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">AnalysisResultData</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update an existing analysis result.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The data to save. Note that the following fields will be ignored:</span>
<span class="sd">            &#39;experiment_uuid&#39;, &#39;device_components&#39;, &#39;type&#39;</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the analysis result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the analysis result does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_result_to_api</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">unused_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;experiment_uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;device_components&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">unused_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">request</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">request</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analysis result </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">result_id</span><span class="si">}</span><span class="s2"> update failed.&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">analysis_result_update</span><span class="p">(</span>
                <span class="n">data</span><span class="o">.</span><span class="n">result_id</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_or_update_analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">create_or_update_analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">AnalysisResultData</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
        <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates or updates an analysis result&quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;json_encoder&quot;</span><span class="p">:</span> <span class="n">json_encoder</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_or_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_analysis_result</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_analysis_result</span><span class="p">,</span>
            <span class="n">params</span><span class="p">,</span>
            <span class="n">create</span><span class="p">,</span>
            <span class="n">max_attempts</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.bulk_update_analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.bulk_update_analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.bulk_update_analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">bulk_update_analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnalysisResultData</span><span class="p">],</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Bulk updates existing analysis results.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An array of the analysis data to save. Note that the following fields will be ignored:</span>
<span class="sd">            &#39;&#39;experiment_uuid&#39;, &#39;device_components&#39;, &#39;type&#39;</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the analysis result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">unused_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;experiment_uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;device_components&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="n">request_list</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;analysis_results&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">for</span> <span class="n">analysis_result</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_result_to_api</span><span class="p">(</span><span class="n">analysis_result</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">unused_fields</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">request</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">request</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="n">request_list</span><span class="p">[</span><span class="s2">&quot;analysis_results&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="s2">&quot;Bulk analysis result update failed.&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">bulk_analysis_result_update</span><span class="p">(</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_list</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
            <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_confirm_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Confirms a delete command; if the options indicate a prompt should be</span>
<span class="sd">        dislayed, display one and verify the user input&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;prompt_for_delete&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">confirmation</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">confirmation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="IBMExperimentService.create_analysis_results">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_results.html#qiskit_ibm_experiment.service.IBMExperimentService.create_analysis_results">[docs]</a>
    <span class="k">def</span> <span class="nf">create_analysis_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnalysisResultData</span><span class="p">],</span> <span class="n">DataFrame</span><span class="p">],</span>
        <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create multiple analysis results in the database using asynchronous calls.</span>

<span class="sd">        If you choose `blocking==True`, the method will run until all the save threads terminated.</span>
<span class="sd">        To improve running time, multithreading is used.</span>

<span class="sd">        If `blocking==False` it is up to the user to verify all the threads finished;</span>
<span class="sd">        `block_for_save()` can be called to ensure all threads finish.</span>
<span class="sd">        `save_status()` returns the information on the status of the threads.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The data to save, either as a list of `AnalysisResultData` or as a pandas `DataFrame`.</span>
<span class="sd">            blocking: Whether to wait for all the save threads to finish before returning control</span>
<span class="sd">            max_workers: Maximum number of worker threads to write to the server.</span>
<span class="sd">            json_encoder: Custom JSON encoder to use to encode the analysis result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryExists: If the analysis result already exits.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataframe_to_analysis_result_list</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">ThreadSaveHandler</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_or_update_analysis_result</span><span class="p">,</span>
            <span class="n">max_workers</span><span class="p">,</span>
            <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span>
            <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">blocking</span><span class="p">:</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">block_for_save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">handler</span><span class="o">.</span><span class="n">save_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">handler</span></div>


    <span class="k">def</span> <span class="nf">_analysis_result_to_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">AnalysisResultData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert analysis result fields to server format.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The analysis result data</span>

<span class="sd">        Returns:</span>
<span class="sd">            API request data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># type: Dict[str, Any]</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;experiment_uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">experiment_id</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">device_components</span><span class="p">:</span>
            <span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">device_components_list</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">device_components</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device_components_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">device_components_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">device_components_list</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">device_components_list</span><span class="p">:</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comp</span><span class="p">))</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;device_components&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">components</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">result_data</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;fit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">result_data</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">result_type</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">result_type</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">tags</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">tags</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">tags</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">quality</span><span class="p">:</span>
            <span class="n">quality</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quality</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quality</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">quality</span> <span class="o">=</span> <span class="n">ResultQuality</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;quality&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RESULT_QUALITY_TO_API</span><span class="p">[</span><span class="n">quality</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">verified</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;verified&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">verified</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">result_id</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">result_id</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">chisq</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="s2">&quot;chisq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">chisq</span>
        <span class="k">return</span> <span class="n">out</span>

<div class="viewcode-block" id="IBMExperimentService.analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">result_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">json_decoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnalysisResultData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a previously stored analysis result.</span>

<span class="sd">        Args:</span>
<span class="sd">            result_id: Analysis result ID.</span>
<span class="sd">            json_decoder: Custom JSON decoder to use to decode the retrieved analysis result.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Retrieved analysis result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the analysis result does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analysis result </span><span class="si">{</span><span class="n">result_id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">):</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">analysis_result_get</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>

        <span class="n">analysis_result_data_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_to_analysis_result</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_decoder</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">AnalysisResultData</span><span class="p">(</span><span class="o">**</span><span class="n">analysis_result_data_dict</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.analysis_results">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_results.html#qiskit_ibm_experiment.service.IBMExperimentService.analysis_results">[docs]</a>
    <span class="k">def</span> <span class="nf">analysis_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">json_decoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">,</span>
        <span class="n">device_components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DeviceComponent</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">device_components_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">result_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">result_type_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">backend_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ResultQuality</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">ResultQuality</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verified</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;OR&quot;</span><span class="p">,</span>
        <span class="n">creation_datetime_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">creation_datetime_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnalysisResultData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all analysis results, with optional filtering.</span>

<span class="sd">        Args:</span>
<span class="sd">            limit: Number of analysis results to retrieve.</span>
<span class="sd">            json_decoder: Custom JSON decoder to use to decode the retrieved analysis results.</span>
<span class="sd">            device_components: Filter by device components.</span>
<span class="sd">            device_components_operator: Operator used when filtering by device components.</span>
<span class="sd">                Valid values are ``None`` and &quot;contains&quot;:</span>

<span class="sd">                    * If ``None``, an analysis result&#39;s device components must match</span>
<span class="sd">                      exactly for it to be included.</span>
<span class="sd">                    * If &quot;contains&quot; is specified, an analysis result&#39;s device components</span>
<span class="sd">                      must contain at least the values specified by the `device_components`</span>
<span class="sd">                      filter.</span>

<span class="sd">            experiment_id: Experiment ID used for filtering.</span>
<span class="sd">            result_type: Analysis result type used for filtering.</span>
<span class="sd">            result_type_operator: Operator used when filtering by result type.</span>
<span class="sd">                Valid values are ``None`` and &quot;like&quot;:</span>

<span class="sd">                * If ``None`` is specified, an analysis result&#39;s type value must</span>
<span class="sd">                  match exactly for it to be included.</span>
<span class="sd">                * If &quot;like&quot; is specified, an analysis result&#39;s type value must</span>
<span class="sd">                  contain the value specified by `result_type`. For example,</span>
<span class="sd">                  ``result_type=&quot;foo&quot;, result_type_operator=&quot;like&quot;`` will match</span>
<span class="sd">                  both ``foo1`` and ``1foo``.</span>

<span class="sd">            backend_name: Backend name used for filtering.</span>
<span class="sd">            quality: Quality value used for filtering. If a list is given, analysis results</span>
<span class="sd">                whose quality value is in the list will be included.</span>
<span class="sd">            verified: Indicates whether this result has been verified..</span>
<span class="sd">            tags: Filter by tags assigned to analysis results. This can be used</span>
<span class="sd">                with `tags_operator` for granular filtering.</span>
<span class="sd">            tags_operator: Logical operator to use when filtering by tags. Valid</span>
<span class="sd">                values are &quot;AND&quot; and &quot;OR&quot;:</span>

<span class="sd">                    * If &quot;AND&quot; is specified, then an analysis result must have all of the tags</span>
<span class="sd">                      specified in `tags` to be included.</span>
<span class="sd">                    * If &quot;OR&quot; is specified, then an analysis result only needs to have any</span>
<span class="sd">                      of the tags specified in `tags` to be included.</span>

<span class="sd">            creation_datetime_after: Filter by the given creation timestamp, in local time.</span>
<span class="sd">                This is used to find analysis results whose creation date/time is after</span>
<span class="sd">                (greater than or equal to) this local timestamp.</span>
<span class="sd">            creation_datetime_before: Filter by the given creation timestamp, in local time.</span>
<span class="sd">                This is used to find analysis results whose creation date/time is before</span>
<span class="sd">                (less than or equal to) this local timestamp.</span>
<span class="sd">            sort_by: Specifies how the output should be sorted. This can be a single sorting</span>
<span class="sd">                option or a list of options. Each option should contain a sort key</span>
<span class="sd">                and a direction. Valid sort keys are &quot;creation_datetime&quot;, &quot;device_components&quot;,</span>
<span class="sd">                and &quot;result_type&quot;. Valid directions are &quot;asc&quot; for ascending or &quot;desc&quot; for</span>
<span class="sd">                descending.</span>
<span class="sd">                For example, ``sort_by=[&quot;result_type: asc&quot;, &quot;creation_datetime:desc&quot;]`` will</span>
<span class="sd">                return an output list that is first sorted by result type in</span>
<span class="sd">                ascending order, then by creation datetime by descending order.</span>
<span class="sd">                By default, analysis results are sorted by ``creation_datetime``</span>
<span class="sd">                descending and ``result_id`` ascending.</span>

<span class="sd">            **filters: Additional filtering keywords that are not supported and will be ignored.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of analysis results. Each analysis result is a dictionary</span>
<span class="sd">            containing the retrieved analysis result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an invalid parameter value is specified.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=arguments-differ</span>
        <span class="c1"># pylint: disable=missing-param-doc</span>

        <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Keywords </span><span class="si">%s</span><span class="s2"> are not supported by IBM Quantum experiment service &quot;</span>
                <span class="s2">&quot;and will be ignored.&quot;</span><span class="p">,</span>
                <span class="n">filters</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">limit</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> is not a valid `limit`, which has to be a positive integer.&quot;</span>
            <span class="p">)</span>

        <span class="n">quality</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quality_filter_to_api</span><span class="p">(</span><span class="n">quality</span><span class="p">)</span>

        <span class="n">created_at_filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">creation_datetime_after</span><span class="p">:</span>
            <span class="n">ca_filter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ge:</span><span class="si">{</span><span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">creation_datetime_after</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">created_at_filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ca_filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">creation_datetime_before</span><span class="p">:</span>
            <span class="n">ca_filter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;le:</span><span class="si">{</span><span class="n">local_to_utc_str</span><span class="p">(</span><span class="n">creation_datetime_before</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">created_at_filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ca_filter</span><span class="p">)</span>

        <span class="n">converted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filtering_to_api</span><span class="p">(</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
            <span class="n">tags_operator</span><span class="o">=</span><span class="n">tags_operator</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
            <span class="n">sort_map</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;creation_datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;created_at&quot;</span><span class="p">,</span>
                <span class="s2">&quot;device_components&quot;</span><span class="p">:</span> <span class="s2">&quot;device_components&quot;</span><span class="p">,</span>
                <span class="s2">&quot;result_type&quot;</span><span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">device_components</span><span class="o">=</span><span class="n">device_components</span><span class="p">,</span>
            <span class="n">device_components_operator</span><span class="o">=</span><span class="n">device_components_operator</span><span class="p">,</span>
            <span class="n">item_type</span><span class="o">=</span><span class="n">result_type</span><span class="p">,</span>
            <span class="n">item_type_operator</span><span class="o">=</span><span class="n">result_type_operator</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">limit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="s2">&quot;Request failed.&quot;</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">analysis_results</span><span class="p">(</span>
                    <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
                    <span class="n">backend_name</span><span class="o">=</span><span class="n">backend_name</span><span class="p">,</span>
                    <span class="n">device_components</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;device_components&quot;</span><span class="p">],</span>
                    <span class="n">experiment_uuid</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
                    <span class="n">result_type</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                    <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span>
                    <span class="n">verified</span><span class="o">=</span><span class="n">verified</span><span class="p">,</span>
                    <span class="n">tags</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="n">created_at</span><span class="o">=</span><span class="n">created_at_filters</span><span class="p">,</span>
                    <span class="n">sort_by</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;sort_by&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_decoder</span><span class="p">)</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;marker&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;analysis_results&quot;</span><span class="p">]:</span>
                <span class="n">analysis_result_data_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_to_analysis_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">AnalysisResultData</span><span class="p">(</span><span class="o">**</span><span class="n">analysis_result_data_dict</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
                <span class="n">limit</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;analysis_results&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">marker</span><span class="p">:</span>  <span class="c1"># No more experiments to return.</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">results</span></div>


    <span class="k">def</span> <span class="nf">_quality_filter_to_api</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ResultQuality</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">ResultQuality</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert quality filter to server format.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">quality</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quality</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">quality</span> <span class="o">=</span> <span class="p">[</span><span class="n">quality</span><span class="p">]</span>

        <span class="n">api_quals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">qual</span> <span class="ow">in</span> <span class="n">quality</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qual</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">qual</span> <span class="o">=</span> <span class="n">ResultQuality</span><span class="p">(</span><span class="n">qual</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
            <span class="n">api_qual</span> <span class="o">=</span> <span class="n">RESULT_QUALITY_TO_API</span><span class="p">[</span><span class="n">qual</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">api_qual</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api_quals</span><span class="p">:</span>
                <span class="n">api_quals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">api_qual</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">api_quals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">api_quals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">api_quals</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ResultQuality</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="s2">&quot;in:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">api_quals</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_filtering_to_api</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;OR&quot;</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sort_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">device_components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DeviceComponent</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">device_components_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">item_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">item_type_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert filtering inputs to server format.</span>

<span class="sd">        Args:</span>
<span class="sd">            tags: Filtering by tags.</span>
<span class="sd">            tags_operator: Tags operator.</span>
<span class="sd">            sort_by: Specifies how the output should be sorted.</span>
<span class="sd">            sort_map: Sort key to API key mapping.</span>
<span class="sd">            device_components: Filter by device components.</span>
<span class="sd">            device_components_operator: Device component operator.</span>
<span class="sd">            item_type: Item type used for filtering.</span>
<span class="sd">            item_type_operator: Operator used when filtering by type.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of mapped filters.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an input key is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tags_filter</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tags_operator</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;OR&quot;</span><span class="p">:</span>
                <span class="n">tags_filter</span> <span class="o">=</span> <span class="s2">&quot;any:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">tags_operator</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;AND&quot;</span><span class="p">:</span>
                <span class="n">tags_filter</span> <span class="o">=</span> <span class="s2">&quot;contains:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tags_operator</span><span class="si">}</span><span class="s2"> is not a valid `tags_operator`. Valid values are &quot;</span>
                    <span class="s1">&#39;&quot;AND&quot; and &quot;OR&quot;.&#39;</span>
                <span class="p">)</span>

        <span class="n">sort_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">sort_by</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sort_by</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="n">sort_by</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">sorter</span> <span class="ow">in</span> <span class="n">sort_by</span><span class="p">:</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">sorter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sort_map</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">&quot; is not a valid sort key. &#39;</span>
                        <span class="sa">f</span><span class="s2">&quot;Valid sort keys are </span><span class="si">{</span><span class="n">sort_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">sort_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">direction</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s1">&quot; is not a valid sorting direction.&#39;</span>
                        <span class="sa">f</span><span class="s1">&#39;Valid directions are &quot;asc&quot; and &quot;desc&quot;.&#39;</span>
                    <span class="p">)</span>
                <span class="n">sort_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">sort_by</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sort_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">device_components</span><span class="p">:</span>
            <span class="n">device_components</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">comp</span><span class="p">)</span> <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">device_components</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">device_components_operator</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">device_components_operator</span> <span class="o">!=</span> <span class="s2">&quot;contains&quot;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">device_components_operator</span><span class="si">}</span><span class="s2"> is not a valid &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;device_components_operator value. Valid values &quot;</span>
                        <span class="sa">f</span><span class="s1">&#39;are ``None`` and &quot;contains&quot;&#39;</span>
                    <span class="p">)</span>
                <span class="n">device_components</span> <span class="o">=</span> <span class="s2">&quot;contains:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">device_components</span>
                <span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="n">item_type</span> <span class="ow">and</span> <span class="n">item_type_operator</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item_type_operator</span> <span class="o">!=</span> <span class="s2">&quot;like&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">item_type_operator</span><span class="si">}</span><span class="s1">&quot; is not a valid type operator value. &#39;</span>
                    <span class="sa">f</span><span class="s1">&#39;Valid values are ``None`` and &quot;like&quot;.&#39;</span>
                <span class="p">)</span>
            <span class="n">item_type</span> <span class="o">=</span> <span class="s2">&quot;like:&quot;</span> <span class="o">+</span> <span class="n">item_type</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">tags_filter</span><span class="p">,</span>
            <span class="s2">&quot;sort_by&quot;</span><span class="p">:</span> <span class="n">sort_by</span><span class="p">,</span>
            <span class="s2">&quot;device_components&quot;</span><span class="p">:</span> <span class="n">device_components</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">item_type</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_api_to_analysis_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">raw_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map API response to a dictionary representing an analysis result.</span>

<span class="sd">        Args:</span>
<span class="sd">            raw_data: API response data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Converted analysis result data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extra_data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">chisq</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chisq&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">chisq</span><span class="p">:</span>
            <span class="n">extra_data</span><span class="p">[</span><span class="s2">&quot;chisq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chisq</span>

        <span class="n">backend_name</span> <span class="o">=</span> <span class="n">raw_data</span><span class="p">[</span><span class="s2">&quot;device_name&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">backend_name</span><span class="p">:</span>
            <span class="n">extra_data</span><span class="p">[</span><span class="s2">&quot;backend_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">backend_name</span>

        <span class="n">quality</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;quality&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">quality</span><span class="p">:</span>
            <span class="n">quality</span> <span class="o">=</span> <span class="n">RESULT_QUALITY_FROM_API</span><span class="p">[</span><span class="n">quality</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span>
            <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;creation_datetime&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convert_dt</span><span class="p">(</span>
            <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;updated_at&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">extra_data</span><span class="p">,</span> <span class="s2">&quot;updated_datetime&quot;</span>
        <span class="p">)</span>

        <span class="n">out_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;result_data&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fit&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="s2">&quot;result_type&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;device_components&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_components&quot;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s2">&quot;experiment_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;experiment_uuid&quot;</span><span class="p">),</span>
            <span class="s2">&quot;result_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;quality&quot;</span><span class="p">:</span> <span class="n">quality</span><span class="p">,</span>
            <span class="s2">&quot;verified&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verified&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="ow">or</span> <span class="p">[],</span>
            <span class="o">**</span><span class="n">extra_data</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">out_dict</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_dataframe_to_analysis_result</span><span class="p">(</span>
        <span class="n">raw_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnalysisResultData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map dataframe dictionary to an analysis result.</span>

<span class="sd">        Args:</span>
<span class="sd">            raw_data: Dataframe dictionary data</span>

<span class="sd">        Returns:</span>
<span class="sd">            Converted analysis result data.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># raw data might contain iterated data structures unknown to us, so deep copy to prevent problems</span>
        <span class="n">raw_data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>

        <span class="n">data_field_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;result_type&quot;</span><span class="p">,</span>
            <span class="s2">&quot;components&quot;</span><span class="p">:</span> <span class="s2">&quot;device_components&quot;</span><span class="p">,</span>
            <span class="s2">&quot;_result_id&quot;</span><span class="p">:</span> <span class="s2">&quot;result_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;_experiment_id&quot;</span><span class="p">:</span> <span class="s2">&quot;experiment_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;_tags&quot;</span><span class="p">:</span> <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
            <span class="s2">&quot;chisq&quot;</span><span class="p">:</span> <span class="s2">&quot;chisq&quot;</span><span class="p">,</span>
            <span class="s2">&quot;created_time&quot;</span><span class="p">:</span> <span class="s2">&quot;creation_datetime&quot;</span><span class="p">,</span>
            <span class="s2">&quot;backend&quot;</span><span class="p">:</span> <span class="s2">&quot;backend_name&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">analysis_result_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">src_key</span><span class="p">,</span> <span class="n">dest_key</span> <span class="ow">in</span> <span class="n">data_field_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">src_key</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">:</span>
                <span class="n">analysis_result_data</span><span class="p">[</span><span class="n">dest_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data</span><span class="p">[</span><span class="n">src_key</span><span class="p">]</span>

        <span class="c1"># extra data is stored in the &#39;result_data&#39; field</span>
        <span class="n">result_data_field_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;_value&quot;</span><span class="p">,</span>
            <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="s2">&quot;_source&quot;</span><span class="p">,</span>
            <span class="s2">&quot;_extra&quot;</span><span class="p">:</span> <span class="s2">&quot;_extra&quot;</span><span class="p">,</span>
            <span class="s2">&quot;experiment&quot;</span><span class="p">:</span> <span class="s2">&quot;_experiment&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">src_key</span><span class="p">,</span> <span class="n">dest_key</span> <span class="ow">in</span> <span class="n">result_data_field_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">src_key</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">:</span>
                <span class="n">result_data</span><span class="p">[</span><span class="n">dest_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data</span><span class="p">[</span><span class="n">src_key</span><span class="p">]</span>
        <span class="n">analysis_result_data</span><span class="p">[</span><span class="s2">&quot;result_data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_data</span>

        <span class="c1"># values which require specific conversions</span>
        <span class="n">analysis_result_data</span><span class="p">[</span><span class="s2">&quot;quality&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RESULT_QUALITY_FROM_DATAFRAME</span><span class="p">[</span>
            <span class="n">raw_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;quality&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">AnalysisResultData</span><span class="p">(</span><span class="o">**</span><span class="n">analysis_result_data</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_analysis_result_to_dataframe</span><span class="p">(</span>
        <span class="n">raw_data</span><span class="p">:</span> <span class="n">AnalysisResultData</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map analysis result to a dataframe dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            raw_data: Analysis result data</span>

<span class="sd">        Returns:</span>
<span class="sd">            Converted analysis result data dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># raw data might contain iterated data structures unknown to us, so deep copy to prevent problems</span>
        <span class="n">raw_data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
        <span class="n">analysis_result_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_type</span><span class="p">,</span>
            <span class="s2">&quot;components&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">device_components</span><span class="p">,</span>
            <span class="s2">&quot;_result_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_id</span><span class="p">,</span>
            <span class="s2">&quot;_experiment_id&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">,</span>
            <span class="s2">&quot;_tags&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span>
            <span class="s2">&quot;chisq&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">chisq</span><span class="p">,</span>
            <span class="s2">&quot;created_time&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">creation_datetime</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_source&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;_extra&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_extra&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;experiment&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">result_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_experiment&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="s2">&quot;quality&quot;</span><span class="p">:</span> <span class="n">RESULT_QUALITY_TO_DATAFRAME</span><span class="p">[</span><span class="n">raw_data</span><span class="o">.</span><span class="n">quality</span><span class="p">],</span>
            <span class="s2">&quot;backend&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">backend_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">analysis_result_data</span>

<div class="viewcode-block" id="IBMExperimentService.delete_analysis_result">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_analysis_result.html#qiskit_ibm_experiment.service.IBMExperimentService.delete_analysis_result">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_analysis_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete an analysis result.</span>

<span class="sd">        Args:</span>
<span class="sd">            result_id: Analysis result ID.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method prompts for confirmation and requires a response before proceeding.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_delete</span><span class="p">(</span>
            <span class="s2">&quot;Are you sure you want to delete the analysis result? [y/N]: &quot;</span>
        <span class="p">):</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">analysis_result_delete</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">RequestsApiError</span> <span class="k">as</span> <span class="n">api_err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">api_err</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Analysis result </span><span class="si">%s</span><span class="s2"> not found.&quot;</span><span class="p">,</span> <span class="n">result_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to process the request: </span><span class="si">{</span><span class="n">api_err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_figure">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_figure.html#qiskit_ibm_experiment.service.IBMExperimentService.create_figure">[docs]</a>
    <span class="k">def</span> <span class="nf">create_figure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">figure</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">figure_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Store a new figure in the database.</span>

<span class="sd">        Note:</span>
<span class="sd">            Currently only SVG figures are supported.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: ID of the experiment this figure is for.</span>
<span class="sd">            figure: Name of the figure file or figure data to store.</span>
<span class="sd">            figure_name: Name of the figure. If ``None``, the figure file name, if</span>
<span class="sd">                given, or a generated name is used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of the name and size of the saved figure.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryExists: If the figure already exits.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">figure_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">figure_name</span> <span class="o">=</span> <span class="n">figure</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">figure_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;figure_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">.svg&quot;</span>

        <span class="c1"># currently the resultdb enforces files to end with .svg</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">figure_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.svg&quot;</span><span class="p">):</span>
            <span class="n">figure_name</span> <span class="o">+=</span> <span class="s2">&quot;.svg&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">figure</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Figure </span><span class="si">{</span><span class="n">figure_name</span><span class="si">}</span><span class="s2"> creation failed.&quot;</span><span class="p">):</span>
            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_plot_upload</span><span class="p">(</span>
                <span class="n">experiment_id</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">figure_name</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">figure_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_figures">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_figures.html#qiskit_ibm_experiment.service.IBMExperimentService.create_figures">[docs]</a>
    <span class="k">def</span> <span class="nf">create_figures</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">figure_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create multiple figures in the database using asynchronous calls.</span>

<span class="sd">        If you choose `blocking==True`, the method will run until all the save threads terminated.</span>
<span class="sd">        To improve running time, multithreading is used.</span>

<span class="sd">        If `blocking==False` it is up to the user to verify all the threads finished;</span>
<span class="sd">        `block_for_save()` can be called to ensure all threads finish.</span>
<span class="sd">        `save_status()` returns the information on the status of the threads.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: ID of the experiment this figure is for.</span>
<span class="sd">            figure_list: A list of the figures to save.</span>
<span class="sd">                Every figure is given by a tuple of the form (figure, name)</span>
<span class="sd">                where `figure` can be the actual figure or its filename</span>
<span class="sd">                and `name` is the name given to the figure in the db.</span>
<span class="sd">                If ``None``, the figure file name, if given, or a generated name is used.</span>
<span class="sd">            blocking: Whether to wait for all the save threads to finish before returning control</span>
<span class="sd">            max_workers: Maximum number of worker threads to write to the server.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryExists: If the figure already exits.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">figure_params</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">)</span> <span class="ow">in</span> <span class="n">figure_list</span>
        <span class="p">]</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">ThreadSaveHandler</span><span class="p">(</span>
            <span class="n">figure_params</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_or_update_figure</span><span class="p">,</span>
            <span class="n">max_workers</span><span class="p">,</span>
            <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">blocking</span><span class="p">:</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">block_for_save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">handler</span><span class="o">.</span><span class="n">save_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">handler</span></div>


<div class="viewcode-block" id="IBMExperimentService.update_figure">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.update_figure.html#qiskit_ibm_experiment.service.IBMExperimentService.update_figure">[docs]</a>
    <span class="k">def</span> <span class="nf">update_figure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">figure</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">figure_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update an existing figure.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>
<span class="sd">            figure: Name of the figure file or figure data to store.</span>
<span class="sd">            figure_name: Name of the figure.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of the name and size of the saved figure.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the figure does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">figure_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">figure_name</span> <span class="o">=</span> <span class="n">figure</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">figure_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;figure_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">.svg&quot;</span>

        <span class="c1"># currently the resultdb enforces files to end with .svg</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">figure_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.svg&quot;</span><span class="p">):</span>
            <span class="n">figure_name</span> <span class="o">+=</span> <span class="s2">&quot;.svg&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">figure</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Figure </span><span class="si">{</span><span class="n">figure_name</span><span class="si">}</span><span class="s2"> update failed.&quot;</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_plot_update</span><span class="p">(</span>
                <span class="n">experiment_id</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">figure_name</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">figure_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_or_update_figure">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_figure.html#qiskit_ibm_experiment.service.IBMExperimentService.create_or_update_figure">[docs]</a>
    <span class="k">def</span> <span class="nf">create_or_update_figure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">figure</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">figure_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a figure if it doesn&#39;t exists, otherwise updates it</span>
<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>
<span class="sd">            figure: Name of the figure file or figure data to store.</span>
<span class="sd">            figure_name: Name of the figure.</span>
<span class="sd">            create: Whether to attempt to create first</span>
<span class="sd">            max_attempts: Maximum number of attempts</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of the name and size of the saved figure.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;experiment_id&quot;</span><span class="p">:</span> <span class="n">experiment_id</span><span class="p">,</span>
            <span class="s2">&quot;figure&quot;</span><span class="p">:</span> <span class="n">figure</span><span class="p">,</span>
            <span class="s2">&quot;figure_name&quot;</span><span class="p">:</span> <span class="n">figure_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_or_update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_figure</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">create</span><span class="p">,</span> <span class="n">max_attempts</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.create_or_update">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.create_or_update.html#qiskit_ibm_experiment.service.IBMExperimentService.create_or_update">[docs]</a>
    <span class="k">def</span> <span class="nf">create_or_update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">create_func</span><span class="p">,</span>
        <span class="n">update_func</span><span class="p">,</span>
        <span class="n">params</span><span class="p">,</span>
        <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates or updates a database entry using the given functions&quot;&quot;&quot;</span>
        <span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="n">attempts</span> <span class="o">&lt;</span> <span class="n">max_attempts</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
            <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">create</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">create_func</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                    <span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">except</span> <span class="n">IBMExperimentEntryExists</span><span class="p">:</span>
                    <span class="n">create</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">update_func</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                    <span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">except</span> <span class="n">IBMExperimentEntryNotFound</span><span class="p">:</span>
                    <span class="n">create</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="IBMExperimentService.figure">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.figure.html#qiskit_ibm_experiment.service.IBMExperimentService.figure">[docs]</a>
    <span class="k">def</span> <span class="nf">figure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an existing figure.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>
<span class="sd">            figure_name: Name of the figure.</span>
<span class="sd">            file_name: Name of the local file to save the figure to. If ``None``,</span>
<span class="sd">                the content of the figure is returned instead.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The size of the figure if `file_name` is specified. Otherwise the</span>
<span class="sd">            content of the figure in bytes.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the figure does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Figure </span><span class="si">{</span><span class="n">figure_name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_plot_get</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">num_bytes</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">num_bytes</span>

        <span class="k">return</span> <span class="n">data</span></div>


<div class="viewcode-block" id="IBMExperimentService.delete_figure">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_figure.html#qiskit_ibm_experiment.service.IBMExperimentService.delete_figure">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete an experiment plot.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method prompts for confirmation and requires a response before proceeding.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>
<span class="sd">            figure_name: Name of the figure.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_delete</span><span class="p">(</span>
            <span class="s2">&quot;Are you sure you want to delete the experiment plot? [y/N]: &quot;</span>
        <span class="p">):</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_plot_delete</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">RequestsApiError</span> <span class="k">as</span> <span class="n">api_err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">api_err</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Figure </span><span class="si">%s</span><span class="s2"> not found.&quot;</span><span class="p">,</span> <span class="n">figure_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IBMApiError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to process the request: </span><span class="si">{</span><span class="n">api_err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="IBMExperimentService.device_components">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.device_components.html#qiskit_ibm_experiment.service.IBMExperimentService.device_components">[docs]</a>
    <span class="k">def</span> <span class="nf">device_components</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">backend_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">],</span> <span class="n">List</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the device components.</span>

<span class="sd">        Args:</span>
<span class="sd">            backend_name: Name of the backend whose components are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of device components if `backend_name` is specified. Otherwise</span>
<span class="sd">            a dictionary whose keys are backend names the values</span>
<span class="sd">            are lists of device components for the backends.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Device components call for backend </span><span class="si">{</span><span class="n">backend_name</span><span class="si">}</span><span class="s2"> failed.&quot;</span>
        <span class="p">):</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">device_components</span><span class="p">(</span><span class="n">backend_name</span><span class="p">)</span>

        <span class="n">components</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">:</span>
            <span class="n">components</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;device_name&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">backend_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">components</span><span class="p">[</span><span class="n">backend_name</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">components</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.files">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.files.html#qiskit_ibm_experiment.service.IBMExperimentService.files">[docs]</a>
    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the file list for an experiment</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Experiment ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The file list metadata</span>

<span class="sd">        Raises:</span>
<span class="sd">            IBMExperimentEntryNotFound: If the experiment does not exist.</span>
<span class="sd">            IBMApiError: If the request to the server failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">map_api_error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Experiment </span><span class="si">{</span><span class="n">experiment_id</span><span class="si">}</span><span class="s2"> file list not received.&quot;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_files_get</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>


<div class="viewcode-block" id="IBMExperimentService.file_upload">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.file_upload.html#qiskit_ibm_experiment.service.IBMExperimentService.file_upload">[docs]</a>
    <span class="k">def</span> <span class="nf">file_upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads a data file to the DB</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The experiment the data file belongs to</span>
<span class="sd">            file_name: The expected filename of the data file</span>
<span class="sd">            file_data: The dictionary of data to save, or JSON serialization of it</span>
<span class="sd">            json_encoder: Custom encoder to use to encode the experiment.</span>

<span class="sd">        Additional info:</span>
<span class="sd">            The filename is expected to end with &quot;.json&quot;, &quot;.yaml&quot;, or &quot;.zip&quot;, otherwise</span>
<span class="sd">            &quot;.json&quot; will be added,</span>
<span class="sd">            and the data itself should be either a dictionary or a JSON serialization</span>
<span class="sd">            with the default encoder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># currently resultdb enforces files to end with .json, .yaml, or .zip</span>
        <span class="c1"># without suffix, we assume json formatting</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.yaml&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">file_name</span> <span class="o">+=</span> <span class="s2">&quot;.json&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># for now we avoid using custom encoder with yaml files</span>
            <span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.yaml&quot;</span><span class="p">):</span>
                <span class="n">file_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">):</span>
                <span class="n">file_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">file_data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_file_upload</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_data</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.file_download">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.file_download.html#qiskit_ibm_experiment.service.IBMExperimentService.file_download">[docs]</a>
    <span class="k">def</span> <span class="nf">file_download</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">json_decoder</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Downloads a data file from the DB and returns its deserialization</span>
<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The experiment the data file belongs to</span>
<span class="sd">            file_name: The filename of the data file</span>
<span class="sd">            json_decoder: Custom decoder to use to decode the retrieved experiment.</span>
<span class="sd">        Returns:</span>
<span class="sd">            The JSON deserialization of the data file</span>
<span class="sd">        Additional info:</span>
<span class="sd">            The filename is expected to end with &quot;.json&quot;, &quot;.yaml&quot;, or &quot;.zip&quot;, otherwise</span>
<span class="sd">            &quot;.json&quot; will be added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.yaml&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">file_name</span> <span class="o">+=</span> <span class="s2">&quot;.json&quot;</span>
        <span class="c1"># for now we avoid using custom decoder with yaml files</span>
        <span class="n">file_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_client</span><span class="o">.</span><span class="n">experiment_file_download</span><span class="p">(</span>
            <span class="n">experiment_id</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">json_decoder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">file_data</span></div>


<div class="viewcode-block" id="IBMExperimentService.experiment_has_file">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.experiment_has_file.html#qiskit_ibm_experiment.service.IBMExperimentService.experiment_has_file">[docs]</a>
    <span class="k">def</span> <span class="nf">experiment_has_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks whether a specific expriment has a specific file</span>
<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The experiment the data file belongs to</span>
<span class="sd">            file_name: The filename of the data file</span>
<span class="sd">        Returns:</span>
<span class="sd">            True if the file exists for the specified experiment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)[</span><span class="s2">&quot;files&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">file_data</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;Key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">file_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">preferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return saved experiment preferences.</span>

<span class="sd">        Note:</span>
<span class="sd">            These are preferences passed to the applications that use this service</span>
<span class="sd">            and have no effect on the service itself. It is up to the application,</span>
<span class="sd">            such as ``qiskit-experiments`` to implement the preferences.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict: The experiment preferences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account</span><span class="o">.</span><span class="n">preferences</span>

<div class="viewcode-block" id="IBMExperimentService.delete_account">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.delete_account.html#qiskit_ibm_experiment.service.IBMExperimentService.delete_account">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">delete_account</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a saved account from disk.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: Name of the saved account to delete.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the account was deleted.</span>
<span class="sd">            False if no account was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">AccountManager</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="IBMExperimentService.dataframe_to_analysis_result_list">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.dataframe_to_analysis_result_list.html#qiskit_ibm_experiment.service.IBMExperimentService.dataframe_to_analysis_result_list">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">dataframe_to_analysis_result_list</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnalysisResultData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts an analysis result dataframe to a list&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IBMExperimentService</span><span class="o">.</span><span class="n">_dataframe_to_analysis_result</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">results</span></div>


<div class="viewcode-block" id="IBMExperimentService.analysis_result_list_to_dataframe">
<a class="viewcode-back" href="../../../stubs/qiskit_ibm_experiment.service.IBMExperimentService.analysis_result_list_to_dataframe.html#qiskit_ibm_experiment.service.IBMExperimentService.analysis_result_list_to_dataframe">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">analysis_result_list_to_dataframe</span><span class="p">(</span>
        <span class="n">result_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnalysisResultData</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts a list of analysis results to a pandas dataframe&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="n">result_dicts</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">IBMExperimentService</span><span class="o">.</span><span class="n">_analysis_result_to_dataframe</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">result_list</span>
        <span class="p">]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">result_dicts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">pandas_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">result_dicts</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">}</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">pandas_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Qiskit Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2024/02/05</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../_static/documentation_options.js?v=7f7c277e"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="../../../_static/tabs.js?v=3030b3cb"></script>
    <script src="../../../_static/scripts/qiskit-sphinx-theme.js?v=4d77b8ca"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>